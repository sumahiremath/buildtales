{% comment %}
  Ultra-Minimal ACH Series Navigation
  
  Apple-inspired: just progress bar and next/previous arrows.
  Clean, unobtrusive, and focused.
{% endcomment %}

{% comment %} Find ACH posts and current position {% endcomment %}
{% assign ach_posts = "" | split: "" %}
{% for post in site.posts %}
  {% if post.categories contains "ach" or post.tags contains "ach" %}
    {% assign ach_posts = ach_posts | push: post %}
  {% endif %}
{% endfor %}

{% assign sorted_ach_posts = ach_posts | sort: "date" %}
{% assign current_position = 0 %}
{% assign total_posts = sorted_ach_posts | size %}

{% for post in sorted_ach_posts %}
  {% if post.url == page.url %}
    {% assign current_position = forloop.index %}
    {% break %}
  {% endif %}
{% endfor %}

{% if current_position > 0 and total_posts > 1 %}
  <!-- Ultra-Minimal Navigation -->
  <div class="series-nav-ultra" style="margin: 2rem 0; display: flex; align-items: center; gap: 1rem;">
    
    <!-- Previous -->
    {% if current_position > 1 %}
      {% assign prev_post = sorted_ach_posts[current_position | minus: 2] %}
      <a href="{{ prev_post.url }}" style="display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; border-radius: 50%; background: #f3f4f6; color: #6b7280; text-decoration: none; transition: all 0.2s ease;">
        <span style="font-size: 1rem;">←</span>
      </a>
    {% endif %}
    
    <!-- Progress Bar -->
    <div style="flex: 1; height: 2px; background: #e5e7eb; border-radius: 1px; overflow: hidden;">
      <div style="width: {{ current_position | times: 100.0 | divided_by: total_posts }}%; height: 100%; background: #157878; border-radius: 1px; transition: width 0.3s ease;"></div>
    </div>
    
    <!-- Next -->
    {% if current_position < total_posts %}
      {% assign next_post = sorted_ach_posts[current_position] %}
      <a href="{{ next_post.url }}" style="display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; border-radius: 50%; background: #f3f4f6; color: #6b7280; text-decoration: none; transition: all 0.2s ease;">
        <span style="font-size: 1rem;">→</span>
      </a>
    {% endif %}
  </div>
{% endif %}
